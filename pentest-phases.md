# Red Team Operations Attack Lifecycle

![Attack Lifecycle](static/attack_lifecycle.png)

## 8 Phases

### 1. Initial Reconnaissance
The first step in any attack lifecycle is to gather valuable information on the target. In order to find the most efficient way to attack the target, adversaries perform extensive information gathering on targetâ€™s technical and non-technical assets. Data is collected using either active or passive reconnaissance. Active reconnaissance involves any information gathering via techniques that directly interact or communicate with a system belonging to the target organization. Whereas passive reconnaissance involves gathering information using sources the target organization does not own, increasing the difficulty of detecting the reconnaissance activity.

**Valuable Data**
1. Technical
    * DNS Records
    * Username formats
    * Email formats
    * Remote access and login systems used (SSO, federated identity, etc.)
    * Physical access systems used (RFID, etc.)
    * Anti-Virus software used
    * Firwalls
    * Routers
    * Services, software, operating systems, etc. being used
    * Active systems and open ports

2. Nontechnical
    * Important employee names
    * Important employee job titles
    * Major departments withing the organization
    * Geographical locations of each department
    * Patterns within in the organization

**Tools and Techniques**
1. Open-source
    * [EmailHarvester](https://github.com/maldevel/EmailHarvester)
    * [Nmap](https://github.com/nmap/nmap)
    * [Sublist3r](https://github.com/aboul3la/Sublist3r)
    * [Shodan](https://www.shodan.io/)
    * [Dirbuster]()
    * [ARIN whois](https://whois.arin.net/ui/)
2. Commercial
    * [Maltego](https://docs.maltego.com/support/home)
    * [Wireshark](https://www.wireshark.org/)

### 2. Initial Compromise
After reconnaissance comes the initial compromise, although the two may overlap. To gain a foothold within the target infrastructure, adversaries drop a malicious payload at the 'point of entry' step. The two most common ways of deploying these programs are spear phishing through malicious email attachements and embedded browser exploits into a website the victim browses to. The majority of initial compromises rely on building trust and manipulating individual through a practice called social engineering. Social engineering is often used in the attack cycle through phishing, spear phishing, and typo-squating. These techniques are used to deliver the malware to the victim. Once this malware has succesfully done its job, persistence must be achieved.

**Social Engineering**
1. Spear-Phishing  
While spear-phishing can and has been done through communication channels such as social media, email is the most common form this technique employs. A carefully pre-selected victim will receive an email with a malicious link or attachment. Upon successful exploitation of the victim's machine, the computer is infected with initial malware. This initial malware could take the form of a Remote Administration Tool (RAT) or if it's a multi-stage malware, it might just be a script to download the full payload from the attackers server.

2. Watering Hole  
A watering hole attack begins by an attacker discovering a frequented site by several or more of their victims, as well as the ip range of their victims. Next, the attacker embeds malicious code into this site using one or more vulnerabilities. This malicious code could be an iframe, link, or anything that redirects a victim to another website where exploit code is waiting to exploit the victim's browser. The malicious code on the frequented website could result in individuals who are non-targets, therefore filtering based on ip addresses and/or ranges is utilized.

**Tools and Techniques**
1. Open-source
    * [Nishang](https://github.com/samratashok/nishang)
    * [Out-Word (built into Nishang)](https://raw.githubusercontent.com/samratashok/nishang/master/Client/Out-Word.ps1)
    * [Browser Autopwn2](https://www.rapid7.com/db/modules/auxiliary/server/browser_autopwn2)
2. Commercial
    * [Bitly](https://bitly.com/)

### 3. Establish Foothold



### 4. Escalate Privileges



### 5. Internal Recon



### 6. Move Laterally



### 7. Maintain Presence



### 8. Complete Mission


## Links and Sources
1. Axeria-Labs
    * [Initial Reconnaissance](https://azeria-labs.com/reconnaissance/)
    * [Initial Compromise](https://azeria-labs.com/initial-compromise/)
    * [Establish Foothold/Maintain Presence](https://azeria-labs.com/persistence/)
    * [Escalate Privileges](https://azeria-labs.com/privilege-escalation/)
    * [Internal Recon/Asset Discovery](https://azeria-labs.com/asset-discovery/)
    * [Move Laterally](https://azeria-labs.com/lateral-movement/)
    * [Exfiltrate Data and Complete Mission](https://azeria-labs.com/data-exfiltration/)
2. Mitre
    * [ATT&CK Matrix](https://attack.mitre.org/)